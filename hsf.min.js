(function(){"use strict";var HSF,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};window._HSF={get:function(id){return _HSF[id]||null}},HSF=function(){function HSF(options){this.delCSS=__bind(this.delCSS,this),this.delClassName=__bind(this.delClassName,this),this.GMP=__bind(this.GMP,this),this.QSA=__bind(this.QSA,this),this.getCharWidth=__bind(this.getCharWidth,this);var ID,ajaxPoolLength,head,k,o,onmessage,s,tail,v,_i,_ref,_this=this;ajaxPoolLength="ajaxPoolLength"in options?options.ajaxPoolLength:5;for(_i=0;ajaxPoolLength>=0?ajaxPoolLength>=_i:_i>=ajaxPoolLength;ajaxPoolLength>=0?_i++:_i--)this._rPool.push({ajax:null,state:0,func:null,err:null});if("debug"in options&&options.debug===!0&&(this._debug=!0),"counter"in options&&!options.counter&&(this._counterEnabled=!1),"dateNames"in options){_ref=options.dateNames;for(k in _ref)__hasProp.call(_ref,k)&&(v=_ref[k],this._dateNames[k]=v)}this._id=this.md5(navigator.userAgent+(new Date).getTime().toString()+Math.random().toString()),_HSF[this._id]=this,this.onDomReady(function(){return document.onkeypress=document.onkeydown=function(e){var list,result,shortcut,_j,_len,_ref1;if(e=e||window.event,result=!0,list=_this._keyListMap[e.keyCode]||[],list.length)for(_j=0,_len=list.length;_len>_j;_j++)if(shortcut=list[_j],e.ctrlKey===shortcut.ctrl&&e.shiftKey===shortcut.shift&&e.altKey===shortcut.alt)if(e.type.indexOf("keydown")>=0||_this._onKeyDowned!==shortcut.func)result=shortcut.func.call(_this,e)||!1,_this._onKeyDowned=shortcut.func;else if(e.type.indexOf("keypress")>=0||_this._onKeyDowned===shortcut.func)return _this._onKeyDowned=null,!0;return(!result||16<=(_ref1=e.keyCode)&&18>=_ref1)&&"preventDefault"in e&&e.preventDefault(),result}}),this.onDomReady(function(){_this.keyListener("semiColon",function(){return _this.printLog()},!0),"function"==typeof _this._initIeStorage&&_this._initIeStorage()}),"bind"in Function.prototype||(Function.prototype.bind=function(oThis){var aArgs,fBound,fNOP,fToBind;if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.take(arguments))},fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),s="test";try{o=s.replace("t","d","g")}catch(_error){}"desd"!==o&&(String.prototype.replaceOld=String.prototype.replace,String.prototype.replace=function(string,newValue,flags){return flags&&"object"!=typeof string?this.replaceOld(new RegExp(string.replaceOld(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),flags),"string"==typeof newValue?newValue.replaceOld(/\$/g,"$$$$"):newValue):this.replaceOld(string,newValue)}),"forEach"in Array.prototype||(Array.prototype.forEach=function(fn,scope){for(var i=0,len=this.length;len>i;++i)i in this&&fn.call(scope,this[i],i,this)}),Array.prototype.take=function(array){for(var i=0,j=this.length,l=array.length;l>i;i++,j++)this[j]=array[i];return this},Array.prototype.del=function(index){return this.splice(index,1),this},"indexOf"in Array.prototype||(Array.prototype.indexOf=function(item,startIndex){var i,l;for(null==startIndex&&(startIndex=0),l=this.length,i=startIndex>=0?0|startIndex:l-(0|startIndex);l>i;){if(i in this&&this[i]===item)return i;i++}return-1}),"setImmediate"in window||(head={},tail=head,ID=(1e7*Math.random()|0)+"",onmessage=function(e){var func;e.data===ID&&(head=head.next,func=head.func,delete head.func,func())},window.addEventListener&&window.addEventListener("message",onmessage,!1),window.setImmediate=window.postMessage&&"msie"!==this.browser().name?function(func){tail=tail.next={func:func},window.postMessage(ID,"*")}:function(func){setTimeout(func,0)}),prepareOnDocumentReady.call(this)}var initOnDomReady,prepareOnDocumentReady,utf8_encode,_charWidth;return HSF.prototype._i=0,HSF.prototype._rPool=[],HSF.prototype._counter=0,HSF.prototype._counterEnabled=!0,HSF.prototype._browser={version:0,name:""},HSF.prototype._debug=!1,HSF.prototype._id="",HSF.prototype._setUniversalStyleCascade={},HSF.prototype._stylePrefixes=["","o","ms","moz","webkit"],HSF.prototype._onResizeCollection=[],HSF.prototype._onResizeArray=[],HSF.prototype._startLogDate=(new Date).getTime(),HSF.prototype._stackLog=[],HSF.prototype._keyMap={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pauseBreak:19,capsLock:20,escape:27,esc:27,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWinKey:91,rightWinKey:92,selectKey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semiColon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBraket:221,singleQuote:222},HSF.prototype._keyListMap=[],HSF.prototype._funcDomReady="",HSF.prototype._onKeyDowned=null,HSF.prototype._dateNames={monthShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],monthFull:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekShort:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],weekFull:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"]},HSF.prototype._scrollBarWidth=-1,HSF.prototype._ready=!1,HSF.prototype._defaultLoader="img/loader.gif",HSF.prototype._storage=null,HSF.prototype._scriptPath="",HSF.prototype._CSSCache=null,HSF.prototype._systemStyleSheet=null,_charWidth={},HSF.prototype.getThis=function(){return"_HSF.get('"+this._id+"')"},HSF.prototype.toSource=function(o,level){var i,isArray,source,space,val,_i,_len;switch(null==level&&(level=0),space=arguments[2]||"  ",typeof o){case"object":if(isArray=o instanceof Array)for(source="[\n",_i=0,_len=o.length;_len>_i;_i++)val=o[_i],"object"==typeof val&&level>0?source+=""+space+this.toSource(val,level-1,space+"  ")+",\n":("string"==typeof val&&(val='"'+val+'"'),source+=""+space+val+",\n");else{source="{\n";for(i in o)__hasProp.call(o,i)&&(val=o[i],"object"==typeof val&&level>0?source+=""+space+i+": "+this.toSource(val,level-1,space+"  ")+",\n":("string"==typeof val&&(val='"'+val+'"'),source+=""+space+i+": "+val+",\n"))}source.length>2&&(source=source.substr(0,source.length-2)+"\n"),source+=""+space.replace("  ",""),source+=isArray?"]":"}";break;case"function":source=""+o||"function(){...}";break;case"string":source='"'+o+'"';break;case"number":case"boolean":source=""+o;break;default:source="undefined"}return source},HSF.prototype.oSize=function(o){var k,s;if(o instanceof String||"string"==typeof o)return o.length;if("object"!=typeof o)throw new Error("argument not object");if("keys"in Object)return Object.keys(o).length;s=0;for(k in o)__hasProp.call(o,k)&&s++;return s},HSF.prototype.oKeys=function(o){var k,res;if(o instanceof String||"string"==typeof o)return this.oKeys([].take(o));if("object"!=typeof o)throw new Error("argument not object");if("keys"in Object)return Object.keys(o);res=[];for(k in o)__hasProp.call(o,k)&&(res[res.length]=k);return res},HSF.prototype.merge=function(to,from){var e,p;for(p in from)if(__hasProp.call(from,p))try{to[p]="object"==typeof from[p]?this.merge(to[p],from[p]):from[p]}catch(_error){e=_error,to[p]=from[p]}return to},HSF.prototype.parseJSON=function(str){return"JSON"in window&&"parse"in JSON?JSON.parse(str):!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(str.replace(/"(\\.|[^"\\])*"/g,""))&&eval("("+str+")")},HSF.prototype.varToJSON=function(o){var el,i,_a,_i,_len,_ret,_ret2;if("JSON"in window&&"stringify"in JSON)return JSON.stringify(o);switch(_ret="",_a="",typeof o){case"string":return'"'+o+'"';case"number":case"boolean":return o.toString();case"object":if(o instanceof Array){for(_ret="[",i=0,_i=0,_len=o.length;_len>_i;_i++){switch(el=o[_i],typeof el){case"string":_ret+=_a+'"'+el+'"';break;case"boolean":case"number":_ret+=_a+el;break;case"object":_ret+=_a+this.varToJSON(el)}_a=",",i++}_ret+="]"}else{if(null===o)return"null";_ret="{";for(i in o)if(__hasProp.call(o,i)){switch(_ret2=null,typeof o[i]){case"string":_ret2='"'+o[i]+'"';break;case"boolean":case"number":_ret2=o[i];break;case"object":_ret2=this.varToJSON(o[i])}null!=_ret2&&(_ret+=_a+'"'+i+'":'+_ret2,_a=",")}_ret+="}"}}return _ret},HSF.prototype.toInt=function(value){switch(typeof value){case"boolean":return+value;case"string":return/^\d+(\.\d+)?([eE][\+-]?\d+)?$/.test(value)?eval(0|value):0|parseInt(value,10)}return 0|parseInt(value,10)},HSF.prototype.toFloat=function(value){var r;switch(typeof value){case"boolean":return+value;case"string":if(/^\d+(\.\d+)?([eE][\+-]?\d+)?$/.test(value))return eval(value);r=parseFloat(value,10);break;default:r=parseFloat(value,10)}return isNaN(r)?0:r},HSF.prototype.mLog=function(a,b){return null==b&&(b=Math.E),1e3*Math.log(a)/(1e3*Math.log(b))},HSF.prototype.md5=function(str){var AA,AddUnsigned,BB,CC,ConvertToWordArray,DD,F,FF,G,GG,H,HH,I,II,RotateLeft,S11,S12,S13,S14,S21,S22,S23,S24,S31,S32,S33,S34,S41,S42,S43,S44,WordToHex,a,b,c,d,k,temp,x;for(RotateLeft=function(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits},AddUnsigned=function(lX,lY){var lResult,lX4,lX8,lY4,lY8;return lX8=2147483648&lX,lY8=2147483648&lY,lX4=1073741824&lX,lY4=1073741824&lY,lResult=(1073741823&lX)+(1073741823&lY),lX4&lY4?2147483648^lResult^lX8^lY8:lX4|lY4?1073741824&lResult?3221225472^lResult^lX8^lY8:1073741824^lResult^lX8^lY8:lResult^lX8^lY8},F=function(x,y,z){return x&y|~x&z},G=function(x,y,z){return x&z|y&~z},H=function(x,y,z){return x^y^z},I=function(x,y,z){return y^(x|~z)},FF=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},GG=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},HH=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},II=function(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)},ConvertToWordArray=function(str){var lByteCount,lBytePosition,lMessageLength,lNumberOfWords,lNumberOfWords_temp1,lNumberOfWords_temp2,lWordArray,lWordCount;for(lMessageLength=str.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords_temp2=(lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64,lNumberOfWords=16*(lNumberOfWords_temp2+1),lWordArray=new Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;lMessageLength>lByteCount;)lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|str.charCodeAt(lByteCount)<<lBytePosition,lByteCount++;return lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition,lWordArray[lNumberOfWords-2]=lMessageLength<<3,lWordArray[lNumberOfWords-1]=lMessageLength>>>29,lWordArray},WordToHex=function(lValue){var WordToHexValue,WordToHexValue_temp,lByte,lCount;for(WordToHexValue="",WordToHexValue_temp="",lCount=0;3>=lCount;)lByte=lValue>>>8*lCount&255,WordToHexValue_temp="0"+lByte.toString(16),WordToHexValue+=WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2),lCount++;return WordToHexValue},S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21,str=utf8_encode(str),x=ConvertToWordArray(str),a=1732584193,b=4023233417,c=2562383102,d=271733878,k=0;k<x.length;)AA=a,BB=b,CC=c,DD=d,a=FF(a,b,c,d,x[k+0],S11,3614090360),d=FF(d,a,b,c,x[k+1],S12,3905402710),c=FF(c,d,a,b,x[k+2],S13,606105819),b=FF(b,c,d,a,x[k+3],S14,3250441966),a=FF(a,b,c,d,x[k+4],S11,4118548399),d=FF(d,a,b,c,x[k+5],S12,1200080426),c=FF(c,d,a,b,x[k+6],S13,2821735955),b=FF(b,c,d,a,x[k+7],S14,4249261313),a=FF(a,b,c,d,x[k+8],S11,1770035416),d=FF(d,a,b,c,x[k+9],S12,2336552879),c=FF(c,d,a,b,x[k+10],S13,4294925233),b=FF(b,c,d,a,x[k+11],S14,2304563134),a=FF(a,b,c,d,x[k+12],S11,1804603682),d=FF(d,a,b,c,x[k+13],S12,4254626195),c=FF(c,d,a,b,x[k+14],S13,2792965006),b=FF(b,c,d,a,x[k+15],S14,1236535329),a=GG(a,b,c,d,x[k+1],S21,4129170786),d=GG(d,a,b,c,x[k+6],S22,3225465664),c=GG(c,d,a,b,x[k+11],S23,643717713),b=GG(b,c,d,a,x[k+0],S24,3921069994),a=GG(a,b,c,d,x[k+5],S21,3593408605),d=GG(d,a,b,c,x[k+10],S22,38016083),c=GG(c,d,a,b,x[k+15],S23,3634488961),b=GG(b,c,d,a,x[k+4],S24,3889429448),a=GG(a,b,c,d,x[k+9],S21,568446438),d=GG(d,a,b,c,x[k+14],S22,3275163606),c=GG(c,d,a,b,x[k+3],S23,4107603335),b=GG(b,c,d,a,x[k+8],S24,1163531501),a=GG(a,b,c,d,x[k+13],S21,2850285829),d=GG(d,a,b,c,x[k+2],S22,4243563512),c=GG(c,d,a,b,x[k+7],S23,1735328473),b=GG(b,c,d,a,x[k+12],S24,2368359562),a=HH(a,b,c,d,x[k+5],S31,4294588738),d=HH(d,a,b,c,x[k+8],S32,2272392833),c=HH(c,d,a,b,x[k+11],S33,1839030562),b=HH(b,c,d,a,x[k+14],S34,4259657740),a=HH(a,b,c,d,x[k+1],S31,2763975236),d=HH(d,a,b,c,x[k+4],S32,1272893353),c=HH(c,d,a,b,x[k+7],S33,4139469664),b=HH(b,c,d,a,x[k+10],S34,3200236656),a=HH(a,b,c,d,x[k+13],S31,681279174),d=HH(d,a,b,c,x[k+0],S32,3936430074),c=HH(c,d,a,b,x[k+3],S33,3572445317),b=HH(b,c,d,a,x[k+6],S34,76029189),a=HH(a,b,c,d,x[k+9],S31,3654602809),d=HH(d,a,b,c,x[k+12],S32,3873151461),c=HH(c,d,a,b,x[k+15],S33,530742520),b=HH(b,c,d,a,x[k+2],S34,3299628645),a=II(a,b,c,d,x[k+0],S41,4096336452),d=II(d,a,b,c,x[k+7],S42,1126891415),c=II(c,d,a,b,x[k+14],S43,2878612391),b=II(b,c,d,a,x[k+5],S44,4237533241),a=II(a,b,c,d,x[k+12],S41,1700485571),d=II(d,a,b,c,x[k+3],S42,2399980690),c=II(c,d,a,b,x[k+10],S43,4293915773),b=II(b,c,d,a,x[k+1],S44,2240044497),a=II(a,b,c,d,x[k+8],S41,1873313359),d=II(d,a,b,c,x[k+15],S42,4264355552),c=II(c,d,a,b,x[k+6],S43,2734768916),b=II(b,c,d,a,x[k+13],S44,1309151649),a=II(a,b,c,d,x[k+4],S41,4149444226),d=II(d,a,b,c,x[k+11],S42,3174756917),c=II(c,d,a,b,x[k+2],S43,718787259),b=II(b,c,d,a,x[k+9],S44,3951481745),a=AddUnsigned(a,AA),b=AddUnsigned(b,BB),c=AddUnsigned(c,CC),d=AddUnsigned(d,DD),k+=16;return temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d),temp.toLowerCase()},utf8_encode=function(str_data){var c,n,utftext;for(str_data=str_data.replace(/\r\n/g,"\n"),utftext="",n=0;n<str_data.length;)c=str_data.charCodeAt(n),128>c?utftext+=String.fromCharCode(c):c>127&&2048>c?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128)),n++;return utftext},HSF.prototype.random=function(min,max){return Math.floor(Math.random()*(max-min+1))+min},HSF.prototype.zeroFill=function(number,width){return width-=number.toString().length,width>0?new Array(width+1).join("0")+number:number+""},HSF.prototype.truncateStringMin=function(str,length,after){return null==after&&(after="..."),str.length>length?str.substr(0,length-after.length)+after:str},HSF.prototype.truncateString=function(str,dMax,uMax,after){var criticalMinChars,dSpace,i,j,minChars,newStr,p,uSpace;if(null==uMax&&(uMax=dMax),null==after&&(after="..."),str.length<=dMax)return str;for(p=new RegExp("\\W"),newStr="",dSpace=-1,uSpace=-1,minChars=Math.floor(.6*str.length),criticalMinChars=Math.floor(.35*str.length),str=str.trim(),dMax-=after.length,uMax-=after.length,0>uMax&&(after=after.substr(0,after.length+uMax)),i=dMax,j=dMax;uMax>=j;){if(p.test(str.charAt(j))){uSpace=j;break}j++}if(0>uSpace)for(;i>0;){if(p.test(str.charAt(i))){dSpace=i;break}i--}return newStr=dSpace>0?minChars>dSpace?uMax>=uSpace&&uSpace>0?str.substr(0,uSpace)+after:criticalMinChars>dSpace?str.substr(0,dMax)+after:str.substr(0,dSpace)+after:str.substr(0,dSpace)+after:uSpace>0?uMax>=uSpace?str.substr(0,uSpace)+after:str.substr(0,dMax)+after:str.length>dMax&&str.length<uMax?str:str.substr(0,dMax)+after},HSF.prototype.getCharWidthMax=function(fs,ff,c){var charEl;return null==c&&(c="W"),ff=ff||"Tahoma",fs=fs||11,ff in _charWidth||(_charWidth[ff]={}),charEl=this.GBI("charEl"),charEl||(charEl=this.createElement("s#charEl",{},document.body)),charEl.style.fontFamily=ff,charEl.style.fontSize=fs+"px",fs in _charWidth[ff]?c in _charWidth[ff][fs]||(f.clearElement(charEl),charEl.appendChild(document.createTextNode(c)),charEl.style.display="inline",_charWidth[ff][fs][c]=charEl.offsetWidth,charEl.style.display="none"):(_charWidth[ff][fs]={},charEl.innerHTML=c,charEl.style.display="inline",_charWidth[ff][fs][c]=charEl.offsetWidth,charEl.style.display="none"),_charWidth[ff][fs][c]},HSF.prototype.getCharWidth=function(fs,ff,c){return this.getCharWidthMax(fs,ff,c)},HSF.prototype.dateToFormat=function(date,format){var p,percentEcran,t,tmp;return percentEcran=!1,/%%/.test(format)&&(percentEcran=!0,format=format.replace(/%%/g,"%%_")),/%d/.test(format)&&(t=date.getDate(),10>t&&(t="0"+t),format=format.replace(/%d/g,t)),/%D/.test(format)&&(t=date.getDate(),format=format.replace(/%D/g,t)),/%w/.test(format)&&(t=date.getDay()||7,format=format.replace(/%w/g,t)),/%m/.test(format)&&(t=date.getMonth()+1,10>t&&(t="0"+t),format=format.replace(/%m/g,t)),/%M/.test(format)&&(t=date.getMonth()+1,format=format.replace(/%M/g,t)),/%y/.test(format)&&(t=date.getFullYear(),format=format.replace(/%y/g,t)),/%Y/.test(format)&&(t=date.getFullYear().toString().substr(2,2),format=format.replace(/%Y/g,t)),/%a/.test(format)&&(t=date.getHours(),t=t>12?"pm":"am",format=format.replace(/%a/g,t)),/%A/.test(format)&&(t=date.getHours(),t=t>12?"PM":"AM",format=format.replace(/%A/g,t)),/%c/.test(format)&&(t=date.toISOString(),format=format.replace(/%c/g,t)),/%l/.test(format)&&(t=this._dateNames.weekShort[(date.getDay()||7)-1],format=format.replace(/%l/g,t)),/%L/.test(format)&&(t=this._dateNames.weekFull[(date.getDay()||7)-1],format=format.replace(/%L/g,t)),/%f/.test(format)&&(t=this._dateNames.monthShort[date.getMonth()],format=format.replace(/%f/g,t)),/%F/.test(format)&&(t=this._dateNames.monthFull[date.getMonth()],format=format.replace(/%F/g,t)),/%g/.test(format)&&(t=date.getHours(),t>12&&(t-=12),10>t&&(t="0"+t),format=format.replace(/%g/g,t)),/%G/.test(format)&&(t=date.getHours(),t>12&&(t-=12),format=format.replace(/%G/g,t)),/%h/.test(format)&&(t=date.getHours(),10>t&&(t="0"+t),format=format.replace(/%h/g,t)),/%H/.test(format)&&(t=date.getHours(),format=format.replace(/%H/g,t)),/%i/.test(format)&&(t=date.getMinutes(),10>t&&(t="0"+t),format=format.replace(/%i/g,t)),/%I/.test(format)&&(t=date.getMinutes(),format=format.replace(/%I/g,t)),/%s/.test(format)&&(t=date.getSeconds(),10>t&&(t="0"+t),format=format.replace(/%s/g,t)),/%S/.test(format)&&(t=date.getSeconds(),format=format.replace(/%S/g,t)),/%p/.test(format)&&(t=date.getMilliseconds(),10>t?t="00"+t:t>=10&&100>t&&(t="0"+t),format=format.replace(/%p/g,t)),/%P/.test(format)&&(t=date.getMilliseconds(),format=format.replace(/%P/g,t)),/%r/.test(format)&&(t=this.dateToFormat(date,"%l, %d %f %y %h:%i:%s %O"),format=format.replace(/%r/g,t)),/%O/.test(format)&&(t=date.toString(),p=t.indexOf("+"),t=t.substr(p>0?p:t.indexOf("-")),format=format.replace(/%O/g,t)),/%u/.test(format)&&(t=date.getTime(),t=(t-t%1e3)/1e3,format=format.replace(/%u/g,t)),/%U/.test(format)&&(t=date.getTime(),format=format.replace(/%U/g,t)),/%z/.test(format)&&(t=date.getTime(),tmp=new Date(t),tmp.setMonth(0),tmp.setDate(1),tmp.setHours(0),tmp.setMinutes(0),tmp.setSeconds(0),tmp.setMilliseconds(0),t=Math.floor((t-tmp.getTime())/864e5)+1,format=format.replace(/%z/g,t)),percentEcran===!0&&(format=format.replace(/%%_/g,"%")),format},HSF.prototype.getSize=function(){var ret;return ret={w:0,h:0,s:0,sl:0,sw:0,sh:0},self.innerHeight?(ret.w=window.innerWidth,ret.h=window.innerHeight,ret.s=window.pageYOffset,ret.sl=window.pageXOffset):document.documentElement&&document.documentElement.clientHeight?(ret.w=document.documentElement.clientWidth,ret.h=document.documentElement.clientHeight,ret.s=document.documentElement.scrollTop,ret.sl=document.documentElement.scrollLeft):document.body&&(ret.w=document.body.clientWidth,ret.h=document.body.clientHeight,ret.s=document.body.scrollTop,ret.sl=document.body.scrollLeft),window.innerHeight&&window.scrollMaxY?(ret.sw=document.body.scrollWidth,ret.sh=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(ret.sw=document.body.scrollWidth,ret.sh=document.body.scrollHeight):(ret.sw=document.body.offsetWidth,ret.sh=document.body.offsetHeight),ret},HSF.prototype.browser=function(){var chrome,nav,safari,start,v;return 0!==this._browser.version?this._browser:(nav=window.navigator,chrome=/Chrome\/([\d\.]+)/,chrome=nav.userAgent.search(chrome),safari=/Safari\/([\d\.]+)/,safari=nav.userAgent.search(safari),start=0,v=0,"Microsoft Internet Explorer"===nav.appName?(this._browser.name="msie",start=nav.appVersion.indexOf("MSIE")+5,v=nav.appVersion.substring(start,nav.appVersion.indexOf(";",start)-1),this._browser.version=parseFloat(v)):-1!==chrome?(this._browser.name="chrome",start=nav.appVersion.indexOf("Chrome")+7,v=nav.appVersion.substring(start,nav.appVersion.indexOf(" ",start)-1),this._browser.version=parseFloat(v)):"Opera"===nav.appName?(this._browser.name="opera",start=nav.userAgent.indexOf("Version")+8,v=nav.userAgent.substring(start,nav.userAgent.length),this._browser.version=parseFloat(v)):-1!==safari?(this._browser.name="safari",start=nav.userAgent.indexOf("Version")+8,v=nav.userAgent.substring(start,nav.userAgent.indexOf(" ",start)-1),this._browser.version=parseFloat(v)):"Netscape"===nav.appName&&"Mozilla"===nav.appCodeName&&-1!==nav.userAgent.indexOf("Firefox")?(this._browser.name="mozilla",start=nav.userAgent.indexOf("Firefox")+8,v=nav.userAgent.substr(start),this._browser.version=parseFloat(v)):(this._browser.name=nav.userAgent,this._browser.version=parseFloat(nav.appVersion)),this._browser)},HSF.prototype.openWin=function(url,title,width,height,option,callback){var err,left,link,map,name,open,top,_i,_len,_ref,_this=this;null==title&&(title=""),null==width&&(width=902),null==height&&(height=700),null==option&&(option={}),map={resizable:1,scrollbars:1,menubar:0,toolbar:0,status:1};try{for(left=(screen.availWidth||screen.width)/2-width/2+(screen.availLeft||0),top=(screen.availHeight||screen.height)/2-height/2+(screen.availTop||0),link="width="+parseInt(width)+",height="+parseInt(height)+",left="+left+", top="+top,_ref=["resizable","scrollbars","menubar","toolbar","status"],_i=0,_len=_ref.length;_len>_i;_i++)name=_ref[_i],link+=","+name+"="+(name in option?option[name]?1:0:map[name]);if(open=function(){var w;return w=window.open(url,title,link),w.activated=!1,w.onfocus=function(){w.activated||(w.activated=!0,"function"==typeof callback?callback(w):_this.log("success win open"))},w.blocked=!!w.document.getElementById,w&&w.focus(),w},"sync"in option&&option.sync===!0)return open();window.setTimeout(open,4)}catch(_error){err=_error,alert("Ошибка открытия окна")}return this},HSF.prototype.log=function(message,type){var console,func,str;if(null==type&&(type="log"),str=((new Date).getTime()-this._startLogDate).toString(),this._stackLog[this._stackLog.length]={time:str,mess:""+type+": "+message},"console"in window){switch(console=window.console,type){case"log":func=console.log;break;case"info":"info"in console?func=console.info:str="INFO: "+str;break;case"err":case"error":"error"in console?func=console.error:str="ERROR: "+str;break;case"warn":case"warning":"warn"in console?func=console.warn:str="WARN: "+str;break;case"debug":"debug"in console?func=console.debug:str="DEBUG: "+str;break;default:str=""+type+": "+str}func||(func=console.log),"function"!=typeof func?func(str+(": "+message)):func.call(console,str+(": "+message))}else this._debug&&alert(""+type+": "+str+": "+message);return this},HSF.prototype.time=function(func,render,async,afterAsync){var start,startRender,t,timeEnd,w,_this=this;return this._debug&&this.log("start time"),start=(new Date).getTime(),async===!0?(timeEnd=function(){var startRender,t,w;_this.log("async finish time at "+(t=(new Date).getTime()-start)+"ms"),render===!0&&(_this._debug&&_this.log("render start"),startRender=(new Date).getTime(),w=document.body.offsetWidth,_this.log("finish render at "+((t=(new Date).getTime())-startRender)+"ms"),_this.log("full complete at "+(t-=start)+"ms")),"function"==typeof afterAsync&&afterAsync(t)},func(timeEnd),this.log("sync finish time at "+(t=(new Date).getTime()-start)+"ms")):(func(),this.log("finish time at "+(t=(new Date).getTime()-start)+"ms")),render===!0&&async!==!0&&(this._debug&&this.log("render start"),startRender=(new Date).getTime(),w=document.body.offsetWidth,this.log("finish render at "+((t=(new Date).getTime())-startRender)+"ms"),this.log("full complete at "+(t-=start)+"ms")),t},HSF.prototype.load=function(url,func,err,data){var active,d,e,errorTex,header,i,label,method,value,_this=this;"object"==typeof url?("scs"in url&&(func=url.scs),"success"in url&&(func=url.success),"err"in url&&(err=url.err),"error"in url&&(err=url.error),"data"in url&&(data=url.data),"method"in url&&(method=url.method),"header"in url&&(header=url.header),url=url.url):"object"==typeof err&&(data=err),active=-1,i=0,errorTex="";for(;i<this._rPool.length;){if(0===this._rPool[i].state){active=i,this._rPool[i].state=1;break}i++}if(0>active&&(active=this._rPool.length,this._rPool[active]={ajax:null,state:1,func:null,err:null}),this._rPool[active].ajax){if(""!==errorTex)return this._rPool[active].state=0,errorTex}else{if(this._rPool[active].ajax=null,this._debug){if("XMLHttpRequest"in window)try{this._rPool[active].ajax=new XMLHttpRequest}catch(_error){e=_error,errorTex+="Cant't create XMLHttpRequest object, but XMLHttpRequest exists. Error: "+e.message,this.log(e.message)}else if(window.ActiveXObject)try{this._rPool[active].ajax=new ActiveXObject("Msxml2.XMLHTTP")}catch(_error){e=_error;try{this._rPool[active].ajax=new ActiveXObject("Microsoft.XMLHTTP")}catch(_error){e=_error,errorTex+="Cant't create ActiveXObject object, but ActiveXObject exists. Error: "+e.message,this.log(e.message)}}}else this._rPool[active].ajax="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this._rPool[active].ajax.onreadystatechange=function(){var xhr,_ref;xhr=null;var xhr=this;return 4===xhr.readyState&&(active=xhr.active,200<=(_ref=xhr.status)&&300>_ref||0===xhr.status&&xhr.responseText.length>0?"getAllResponseHeaders"in xhr?_this._rPool[active].func(xhr.responseText,xhr.getAllResponseHeaders(),xhr.status):_this._rPool[active].func(xhr.responseText,"",xhr.status):_this._rPool[active].err(xhr.statusText),_this._rPool[active].state=0),!0}}if(this._rPool[active].ajax){if(this._rPool[active].func=func,this._rPool[active].err=err?err:function(){return!0},this._rPool[active].ajax.active=active,this._rPool[active].state=1,null==data){if(d=this._counterEnabled?(url.indexOf("?")>0?"&":"?")+"cOuNtEr="+this._counter++:"",this._rPool[active].ajax.open(method||"GET",url+d,!0),header)for(label in header)value=header[label],this._rPool[active].ajax.setRequestHeader(label,value);this._rPool[active].ajax.send(null)}else{if(this._rPool[active].ajax.open(method||"POST",url,!0),this._rPool[active].ajax.setRequestHeader("Content-length",data.length),this._rPool[active].ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded"),header)for(label in header)value=header[label],this._rPool[active].ajax.setRequestHeader(label,value);this._rPool[active].ajax.send(data)}return this._rPool[active].ajax}return errorTex||"err"},HSF.prototype.getScrollBarWidth=function(){var inner,outer,w1,w2;return this._scrollBarWidth<0&&(this.appendChild(document.body,"<div id='__HSFscrollbar' style='position:absolute;top:0;left:0;visibility:hidden;width:200px;height:150px;overflow:hidden;'><p style='width:100%;height:200px'></p></div>"),outer=f.GBI("__HSFscrollbar"),inner=outer.children[0],w1=inner.offsetWidth,outer.style.overflow="scroll",w2=inner.offsetWidth,w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),this._scrollBarWidth=w1-w2),this._scrollBarWidth},HSF.prototype.GBI=function(el){return document.getElementById(el)},HSF.prototype.GBC=function(classname,node){return null==node&&(node=document),"getElementsByClassName"in node?node.getElementsByClassName(classname):function(searchClass,node){var classElements,els,elsLen,i,j,pattern;for(classElements=[],els=node.getElementsByTagName("*"),elsLen=els.length,pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)"),i=0,j=0;elsLen>i;)pattern.test(els[i].className)&&(classElements[j]=els[i],j++),i++;return classElements}(classname,node)},HSF.prototype.qsa=function(queryString,context){var a,beh,c,i,j,r,s,script,selector,_i,_j,_len,_len1,_ref;if(null==context&&(context=document),"querySelectorAll"in context)return[].take(context.querySelectorAll(queryString));if("jQuery"in window)return jQuery(queryString,context).get();if(s=document.createStyleSheet(),r=queryString.replace(/\[for\b/gi,"[htmlFor").split(","),window.hsfSelectorCollection=[],""===this._scriptPath){for(_ref=this.GBT("script"),_i=0,_len=_ref.length;_len>_i;_i++)if(script=_ref[_i],/hsf\.(min\.|dev\.)?js$/.test(script.src||"")){this._scriptPath=script.src.replace(/hsf\.(min\.|dev\.)?js$/,"");break}""===this._scriptPath&&(this._scriptPath=!1)}if(this._scriptPath===!1){for(a=context.all,c=[],i=r.length;i--;){for(s.addRule(r[i],"k:v"),j=a.length;j--;)a[j].currentStyle.k&&c.push(a[j]);s.removeRule(0)}return c}for(beh=this._scriptPath+"/ca.htc",_j=0,_len1=r.length;_len1>_j;_j++)selector=r[_j],s.addRule(selector,"behavior: url("+beh+")"),s.removeRule(0);return s.owningElement.parentNode.removeChild(s.owningElement),window.hsfSelectorCollection},HSF.prototype.QSA=function(queryString,context){return null==context&&(context=document),this.qsa(queryString,context)},HSF.prototype.GBT=function(tagName,node){return null==node&&(node=document),node.getElementsByTagName(tagName)},HSF.prototype.GPT=function(el,tagName){var _ref;if(null==tagName||""===tagName)return null;if(tagName=tagName.toLowerCase(),!el||!el.parentNode)return null;for(;null!=(null!=el?null!=(_ref=el.parentNode)?_ref.tagName:void 0:void 0);)if(el=el.parentNode,el.tagName.toLowerCase()===tagName)return el;return null},HSF.prototype.GPC=function(el,className){if(!el)return null;if(""!==className){for(;null!=(null!=el?el.parentNode:void 0);)if(el=el.parentNode,this.hasClassName(el,className))return el}else for(;null!=(null!=el?el.parentNode:void 0);)if(el=el.parentNode,!el.className)return el;return null},HSF.prototype.createElement=function(tag,option,parent){var el,key,regRes,tagName,val,_ref;if(null==option&&(option={}),/^\w+$/.test(tag)?el=document.createElement(tag):(regRes=tag.match(/^(\w+)?(#(.*?))?(\.(.*))?$/),tagName=regRes[1]||"div",el=document.createElement(tagName),"string"==typeof regRes[3]&&(el.id=regRes[3]),"string"==typeof regRes[5]&&(el.className=regRes[5].replace(/[\.\s]+/g," "))),"style"in option){_ref=option.style;for(key in _ref)__hasProp.call(_ref,key)&&(val=_ref[key],el.style[key]=val);delete option.style}"innerHTML"in option&&(el.innerHTML=option.innerHTML,delete option.innerHTML);for(key in option)__hasProp.call(option,key)&&(val=option[key],el.setAttribute(key,val));return parent&&parent.appendChild(el),el},HSF.prototype.appendChild=function(parent,el){var div,elems,i,l;if("string"==typeof el){for(div=document.createElement("div"),div.innerHTML=el,elems=[],i=0,l=div.childNodes.length,el=[];l>i;)el[el.length]=div.childNodes[0],parent.appendChild(div.childNodes[0]),i++;return div=null,el}if(!("object"==typeof el&&"nodeType"in el))throw new Error("el must be string or element");
return parent.appendChild(el),[el]},HSF.prototype.removeElement=function(el){return el.parentNode.removeChild(el),this},HSF.prototype.replaceElement=function(el,newEl){return el.parentNode.replaceChild(newEl,el),this},HSF.prototype.clearElement=function(el){var childs,i;for(childs=el.childNodes,i=childs.length;i--;)el.removeChild(childs[i]);return this},HSF.prototype.getSelection=function(el){var end,endRange,len,normalizedValue,range,start,textInputRange;return start=0,end=0,"number"==typeof el.selectionStart&&"number"==typeof el.selectionEnd?(start=el.selectionStart,end=el.selectionEnd):(range=document.selection.createRange(),range&&range.parentElement()===el&&(len=el.value.length,normalizedValue=el.value.replace(/\r\n/g,"\n"),textInputRange=el.createTextRange(),textInputRange.moveToBookmark(range.getBookmark()),endRange=el.createTextRange(),endRange.collapse(!1),textInputRange.compareEndPoints("StartToEnd",endRange)>-1?start=end=len:(start=-textInputRange.moveStart("character",-len),start+=normalizedValue.slice(0,start).split("\n").length-1,textInputRange.compareEndPoints("EndToEnd",endRange)>-1?end=len:(end=-textInputRange.moveEnd("character",-len),end+=normalizedValue.slice(0,end).split("\n").length-1)))),{start:start,end:end}},HSF.prototype.getPos=function(el,parent){var body,box,clientLeft,clientTop,docElem,left,s,scrollLeft,scrollTop,top;if(null==parent&&(parent=document.body),!this.hasElement(parent,el)||null===el.offsetParent)return!1;if(s={x:0,y:0},"getBoundingClientRect"in el&&parent===document.body)box=el.getBoundingClientRect(),body=document.body,docElem=document.documentElement,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft,s.x=Math.round(left),s.y=Math.round(top);else if(parent===document.body)for(el.offsetParent||(s.x+=el.offsetLeft,s.y+=el.offsetTop);el.offsetParent;)s.x+=el.offsetLeft,s.y+=el.offsetTop,el=el.offsetParent;else{for(;!this.hasElement(el.offsetParent,parent);)if(s.x+=el.offsetLeft,s.y+=el.offsetTop,el=el.offsetParent,!el)return s;el.offsetParent!==parent?(s.x+=el.offsetLeft-parent.offsetLeft,s.y+=el.offsetTop-parent.offsetTop):(s.x+=el.offsetLeft,s.y+=el.offsetTop)}return s},HSF.prototype.getMousePos=function(e){var posx,posy;if(!e)throw new Error("event is empty");return posx=0,posy=0,e.pageX||e.pageY?(posx=e.pageX,posy=e.pageY):(e.clientX||e.clientY)&&(posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:posx,y:posy}},HSF.prototype.GMP=function(e){return this.getMousePos(e)},HSF.prototype.getScreenPos=function(el){var body,box,clientLeft,clientTop,docElem,s,scrollLeft,scrollTop;return s={x:0,y:0},"getBoundingClientRect"in el?(box=el.getBoundingClientRect(),s.x=Math.round(box.left),s.y=Math.round(box.top)):(box=this.getPos(el),body=document.body,docElem=document.documentElement,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,s.x=box.x+clientLeft-scrollLeft,s.y=box.y+clientTop-scrollTop),s},HSF.prototype.getStyle=function(el,styleName){var ret;return"msie"===this.browser().name?styleName in el.currentStyle?el.currentStyle[styleName]:"":(ret=window.getComputedStyle(el,null),null!=ret[styleName]?ret[styleName]:"")},HSF.prototype.setStyle=function(el,style){var k,s;switch(typeof style){case"string":el.style.cssText+=";"+style;break;case"object":for(k in style)s=style[k],el.style[k]=s}return this},HSF.prototype.getIndexElement=function(el,node){return null==node&&(node=!1),node===!0?[].slice.call(el.parentNode.childNodes).indexOf(el):[].slice.call(el.parentNode.children).indexOf(el)},HSF.prototype.setMem=function(el,prop,val,nameSpace){return null==nameSpace&&(nameSpace="HSF"),nameSpace?(nameSpace in el||(el[nameSpace]={}),el[nameSpace][prop]=val):el[prop]=val,this},HSF.prototype.getMem=function(el,prop,nameSpace){if(null==nameSpace&&(nameSpace="HSF"),nameSpace in el){if(prop in el[nameSpace])return el[nameSpace][prop]}else if(!nameSpace&&prop in el)return el[prop];return null},HSF.prototype.getMemList=function(el,nameSpace){return null==nameSpace&&(nameSpace="HSF"),nameSpace?el[nameSpace]:{}},HSF.prototype.clearMem=function(el,nameSpace){return null==nameSpace&&(nameSpace="HSF"),nameSpace?(el[nameSpace]={},!0):!1},HSF.prototype.buttonClick=function(el,props,opt){var md,mu,_this=this;return null==opt&&(opt={}),md=function(){return _this.setTempStyle(el,props,"Click"),_this.addEvent(el,"mouseout",mu),"down"in opt&&opt.down(el),!0},mu=function(){return _this.retTempStyle(el,"Click"),_this.removeEvent(el,"mouseout",mu),"up"in opt&&opt.up(el),!0},this.addEvent(el,"mouseup",mu),this.addEvent(el,"mousedown",md),opt.activate===!0&&el.onmousedown(),this},HSF.prototype.hover=function(el,props,opt){var mout,mover,_this=this;return null==opt&&(opt={}),mover=function(e){var src;return e=e||window.event,src=e.toElement||document.body,"mouseenter"!==e.type&&_this.hasElement(el,src)&&_this.getMem(el,"hover")?!0:(_this.setTempStyle(el,props,"Hover"),"over"in opt&&opt.over(el),_this.setMem(el,"hover",!0),!0)},mout=function(e){var src;return e=e||window.event,src=e.toElement||document.body,"mouseleave"!==e.type&&_this.hasElement(el,src)&&el!==src?!0:(_this.retTempStyle(el,"Hover"),"out"in opt&&opt.out(el),_this.setMem(el,"hover",!1),!0)},"msie"===this.browser().name?(el.attachEvent("onmouseenter",mover),el.attachEvent("onmouseleave",mout),opt.activate===!0&&mover({toElement:el})):"onmouseenter"in el?(el.addEventListener("mouseenter",mover,!1),el.addEventListener("mouseleave",mout,!1),opt.activate===!0&&mover({toElement:el})):(el.addEventListener("mouseover",mover,!1),el.addEventListener("mouseout",mout,!1),opt.activate===!0&&mover({toElement:el})),this},HSF.prototype.setTempStyle=function(el,props,state){var k,oldState,touch,v;touch=this.getMem(el,"touch"),touch?(oldState=touch[touch.length-1],touch.push("oldStyle"+state)):(oldState="originStyle",touch=["oldStyle"+state]);for(k in props)__hasProp.call(props,k)&&(v=props[k],k in el.style&&(this.setMem(el,k,el.style[k],oldState).setMem(el,k,v,"oldStyle"+state),el.style[k]=v));return this.setMem(el,"touch",touch)},HSF.prototype.retTempStyle=function(el,state){var index,k,oldState,oldStyle,props,touch,v,_ref;if(props=this.getMemList(el,"oldStyle"+state),!props)return this;if(touch=this.getMem(el,"touch"),!touch)return this;if(index=touch.indexOf("oldStyle"+state),0>index)return f.log("Error: retTempStyle: index tempStyle is -1"),this;oldState=index>0?touch[index-1]:"originStyle",oldStyle=this.getMemList(el,oldState);for(k in props)k in oldStyle?el.style[k]=oldStyle[k]:oldStyle[k]=props[k];if(touch.del(index),index!==touch.length)for(;index<touch.length;){_ref=this.getMemList(el,touch[index]);for(k in _ref)v=_ref[k],el.style[k]=v;index++}return 0===touch.length&&(touch=null),this.setMem(el,"touch",touch)},HSF.prototype.addEvent=function(elem,evType,fn){var bVersion,collectByType,eventElem,func,hashChangeCorrect,oldHash,oldHref,onEvType,_this=this;if(evType=evType.replace(/^on/,""),"addEventListener"in elem)elem.addEventListener(evType,fn,!1);else{if(onEvType="on"+evType,!(onEvType in elem)&&"hashchange"!==evType)return!1;if("hashchange"===evType&&"location"in elem){switch(hashChangeCorrect=!1,bVersion=this._browser.version,this._browser.name){case"msie":document.documentMode<8&&(hashChangeCorrect=!0);break;case"mozilla":3.6>bVersion&&(hashChangeCorrect=!0);break;case"chrome":case"safari":5>bVersion&&(hashChangeCorrect=!0);break;case"opera":10.6>bVersion&&(hashChangeCorrect=!0);break;default:hashChangeCorrect=!0}hashChangeCorrect&&(elem.onhashchange=null,oldHash=elem.location.hash,oldHref=elem.location.href,window.setInterval(function(){try{elem.location.hash!==oldHash&&(oldHash=elem.location.hash,oldHref=elem.location.href,"function"==typeof elem.onhashchange&&elem.onhashchange.call(elem,{target:elem,timestamp:(new Date).getTime(),oldURL:oldHref,newURL:elem.location.hash}))}catch(_error){}},42))}func=function(e){var _i,_len,_ref;for(e=e||window.event,e.target=e.target||e.srcElement,_ref=_this.getMem(elem,evType,"eventsListener"),_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],func.call(elem,e);return!0},onEvType in elem&&!elem[onEvType]?(this.setMem(elem,evType,[fn],"eventsListener"),elem[onEvType]=func):(this.getMem(elem,evType,"eventsListener")||(eventElem=elem[onEvType],this.setMem(elem,evType,[eventElem],"eventsListener"),elem[onEvType]=func),this.getMem(elem,evType,"eventsListener").push(fn))}return this._debug===!0&&(collectByType=this.getMem(elem,evType,"eventListenerCollect"),null===collectByType?this.setMem(elem,evType,[{fn:fn,enable:!0}],"eventListenerCollect"):collectByType.push({fn:fn,enable:!0})),function(){return _this.removeEvent(elem,evType,fn)}},HSF.prototype.removeEvent=function(elem,evType,fn){var collectByType,fns,func,nfns,val,_i,_j,_len,_len1;if(evType=evType.replace(/^on/,""),elem.addEventListener)elem.removeEventListener(evType,fn,!1);else{for(fns=this.getMem(elem,evType,"eventsListener"),nfns=[],_i=0,_len=fns.length;_len>_i;_i++)val=fns[_i],val!==fn&&nfns.push(val);this.setMem(elem,evType,nfns,"eventsListener")}if(this._debug===!0)for(collectByType=this.getMem(elem,evType,"eventListenerCollect"),_j=0,_len1=collectByType.length;_len1>_j;_j++)func=collectByType[_j],func.fn===fn&&(func.enable=!1);return!0},HSF.prototype.createBubble=function(html,w,h,options){var bc,bg,bgh,bodyChildrens,bubble,bubbleContainer,closeBtn,height,hght,i,img,l,t,top,ws,zIndex,zi,_this=this;if(null==w&&(w=300),null==h&&(h=200),null==options&&(options={}),!html)return!1;if(this.closeBubble(),bubble=this.GBI("bubbleItem"),bubbleContainer=null,ws=this.getSize(),!bubble){for(bodyChildrens=document.body.children,zIndex=10,i=0,this.setCSS(".bubbleItem",{"background-color":"white","font-family":'Verdana, "Geneva CY", "DejaVu Sans", sans-serif',"font-size":"80%"}).setCSS(".bubbleItem .closeBtn",{cursor:"pointer","float":"right",width:"12px"}).setCSS(".bubbleItem .bubbleContainer",{margin:"19px 10px 0","text-align":"left"}).setCSS(".bubbleItem .alertBubble",{overflow:"hidden"}).setCSS(".bubbleItem .alertBubble > button[onclick]",{"float":"right","margin-right":"10px","margin-top":"10px"}),bg=this.createElement("#bubbleBG",{style:{display:"block",position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:zIndex,backgroundColor:"#ccc",opacity:"0.5"}},document.body);i<bodyChildrens.length;)bc=bodyChildrens[i],zi=null!=bc?this.toInt(this.getStyle(bc,"zIndex")):0,zi>zIndex&&(zIndex=zi+1),i++;bg.style.zIndex=zIndex,bubble=this.createElement("#bubbleItem.bubbleItem",{style:{position:"absolute"},close:function(){var func;bg.style.display="none",bubble.style.display="none",_this.clearElement(bubbleContainer),func=_this.getMem(bubble,"func"),null!==func&&(func(),_this.setMem(bubble,"func",null))}},document.body),bubble.style.zIndex=zIndex+1,closeBtn=this.createElement(".closeBtn",{innerHTML:"X",onclick:bubble.close},bubble),bg.onclick=bubble.close,bubbleContainer=this.createElement(".bubbleContainer",{},bubble),this.setOnResize(bg,function(){var l,t;return ws=_this.getSize(),l=(ws.w-parseInt(bubble.style.width))/2,t=(ws.h-parseInt(bubble.style.height))/2+_this.getMem(bubble,"s"),0>l?l=0:l+="px",0>t?t=0:t+="px",bubble.style.left=l,bubble.style.top=t}),this.keyListener("esc",function(){return _this.closeBubble()})}if(bubble.style.width=w+"px",bubble.style.height=h+"px",l=(ws.w-w)/2,t=(ws.h-h)/2,0>l?l=0:l+="px",0>t?t=0:t+="px",bubble.style.left=l,bubble.style.top=t,null===bubbleContainer&&(bubbleContainer=bubble.getElementsByTagName("div")[1]),bubbleContainer.style.overflowY="","string"==typeof html)bubbleContainer.innerHTML=html;else{if(!("object"==typeof html&&"nodeType"in html))return!1;this.clearElement(bubbleContainer),bubbleContainer.appendChild(html)}return bubble.style.display="block",bg=this.GBI("bubbleBG"),bg.style.display="block","close"in options?this.setMem(bubble,"func",options.close):this.setMem(bubble,"func",null),"loader"in options&&options.loader?(this.setTempStyle(f.GBC("closeBtn",bubble)[0],{display:"none"},"loader"),img=f.GBT("img",bubble)[0],bubble.style.left=ws.w/2-img.offsetWidth+"px",bubble.style.top=ws.h/2-img.offsetHeight+"px",f.GBI("bubbleBG").onclick=null,f.setMem(bubble,"flagLoader",!0)):f.getMem(bubble,"flagLoader")&&(this.retTempStyle(f.GBC("closeBtn",bubble)[0],"loader"),f.GBI("bubbleBG").onclick=bubble.close,f.setMem(bubble,"flagLoader",!1)),"resize"in options&&options.resize&&(bgh=bg.offsetHeight,bubbleContainer.children[0].offsetHeight+bubble.children[0].offsetHeight>bubble.offsetHeight&&(bubbleContainer.children[0].offsetHeight<bgh-20?(hght=bubbleContainer.children[0].offsetHeight+bubble.children[0].offsetHeight+20,h=hght>h?hght:h,bubble.style.top=""+(ws.h-h)/2+"px",bubble.style.height=h+"px"):(bubble.style.height=""+(bgh-20)+"px",bubble.style.top="10px",bubbleContainer.style.overflowY="scroll"))),top=parseInt(bubble.style.top),height=parseInt(bubble.style.height),this.setMem(bubble,"s",ws.s),ws.s>0&&(ws.sh<ws.s+top+height?ws.sh>top+height&&(bubble.style.top=top+(ws.sh-height)+"px"):bubble.style.top=ws.h<height?ws.s+"px":top+ws.s+"px"),this},HSF.prototype.closeBubble=function(){return this.GBI("bubbleItem")&&this.GBI("bubbleItem").close(),this},HSF.prototype.getBubble=function(){return this.GBI("bubbleItem")||null},HSF.prototype.createLoaderBubble=function(img){var el;return null==img&&(img=this._defaultLoader),null==this._defaultLoader&&(this._defaultLoader=img),"object"==typeof img?(el=document.createElement("div"),el.style.textAlign="center",el.style.marginTop="50%",el.appendChild(img),this.createBubble(el,0,0,{loader:!0})):this.createBubble("<div style='text-align:center;margin-top:50px;'><img src='"+img+"' alt='ajax-loader'/></div>",0,0,{loader:!0}),this},HSF.prototype.createAlertBubble=function(text,option){return null==option&&(option={}),option.resize=!0,this.createBubble('<div class="alertBubble"><span>'+text+'</span><button onclick="'+this.getThis()+'.closeBubble();">Ok</button></div>',400,60,option)},HSF.prototype.setUniversalStyle=function(el,name,value){var index,style,styleName,webkitName,_i,_len,_ref,_ref1;if(name=name.toLowerCase(),!(name in this._setUniversalStyleCascade)){this._setUniversalStyleCascade[name]=[];for(style in el.style)"string"==typeof style&&(index=style.toLowerCase().indexOf(name),index>=0&&index+name.length===style.length&&(_ref=style.substr(0,index).toLowerCase(),__indexOf.call(this._stylePrefixes,_ref)>=0)&&this._setUniversalStyleCascade[name].push(style));"safari"===this.browser().name&&(name in el.style&&this._setUniversalStyleCascade[name].push(name),webkitName="webkit"+name.substr(0,1).toUpperCase()+name.substr(1),webkitName in el.style&&this._setUniversalStyleCascade[name].push(webkitName))}for(_ref1=this._setUniversalStyleCascade[name],_i=0,_len=_ref1.length;_len>_i;_i++){styleName=_ref1[_i];try{el.style[styleName]=value}catch(_error){}}return!0},HSF.prototype.hasElement=function(el,child,childOnly){var e,html,parent;if(null==childOnly&&(childOnly=!1),"contains"in el)return childOnly?el.contains(child):el===child||el.contains(child);try{if(el===child&&!childOnly)return!0;if(parent=child.parentNode,!parent||!parent.parentNode)return!1;for(html=document.getElementsByTagName("html")[0];parent!==el;){if(null==parent||parent===html)return!1;parent=parent.parentNode}return!0}catch(_error){return e=_error,this.log("hasElement"+e.message,"warn"),!1}},HSF.prototype.setOnResize=function(el,funcName){var col,pos,_this=this;return pos=this.getMem(el,"resizePos"),null!==pos?(col=this._onResizeCollection[pos],funcName&&(col.func=funcName),1===col.type?col.action=this.addEvent(el,"resize",col.func):this._onResizeArray[this._onResizeArray.length]=pos,pos):(pos=this._onResizeCollection.length,"onresize"in el?(this._onResizeCollection[pos]={el:el,func:funcName,type:1,action:this.addEvent(el,"resize",funcName)},pos):"object"!=typeof el?-1:"nodeType"in el?(this._onResizeCollection[pos]={el:el,func:funcName,type:0,action:null},this._onResizeArray[this._onResizeArray.length]=pos,this.setMem(el,"ow",el.offsetWidth),this.setMem(el,"oh",el.offsetHeight),this.setMem(el,"resizePos",pos),window.setInterval(function(){return _this.resizeObjects()},42),pos):-1)},HSF.prototype.resizeObjects=function(){var el,oh,ow,position,_i,_len,_ref;for(_ref=this._onResizeArray,_i=0,_len=_ref.length;_len>_i;_i++)position=_ref[_i],el=this._onResizeCollection[position],ow=this.getMem(el.el,"ow"),oh=this.getMem(el.el,"oh"),(ow!==el.el.offsetWidth||oh!==el.el.offsetHeight)&&(this.setMem(el.el,"ow",el.el.offsetWidth),this.setMem(el.el,"oh",el.el.offsetHeight),el.func.call(el.el,position));return!0},HSF.prototype.retOnResize=function(pos){var col,na,position,_i,_len,_ref;if(col=this._onResizeCollection[pos],1===col.type)col.action();else{if(__indexOf.call(this._onResizeArray,pos)<0)return col;for(na=[],_ref=this._onResizeArray,_i=0,_len=_ref.length;_len>_i;_i++)position=_ref[_i],pos!==position&&(na[na.length]=position);this._onResizeArray=na}return col},HSF.prototype.addClassName=function(el,className){return this.hasClassName(el,className)||(el.className+=" "+className.trim()),this},HSF.prototype.hasClassName=function(el,className){return!((" "+el.className+" ").indexOf(" "+className.trim()+" ")<0)},HSF.prototype.removeClassName=function(el,className){return this.hasClassName(el,className)&&(el.className=(" "+el.className+" ").replace(" "+className.trim()+" "," ").trim()),this},HSF.prototype.delClassName=function(el,className){return this.removeClassName(el,className)},HSF.prototype.printLog=function(){var height,html,lenTime,n,str,time,timeString,tl,tl0,_i,_j,_len,_ref,_ref1;for(lenTime=8,html='<table id="printLog" cellpadding="0" cellspacing="0" style="border:0;"><tr><td valign="top" align="left" style="width:40px">',tl="",str='<ul style="font-family:monospace;list-style:none outside none;margin:0;padding:0;">',height=0,_ref=this._stackLog,_i=0,_len=_ref.length;_len>_i;_i++){for(time=_ref[_i],timeString=""+time.time,n=_j=lenTime,_ref1=timeString.length;_ref1>=lenTime?_ref1>=_j:_j>=_ref1;n=_ref1>=lenTime?++_j:--_j)timeString+=".";tl+="<div id='dotLogPoint"+time+"' onmouseover=\""+this.getThis()+'.selectLogPoint(this);" onmouseout="'+this.getThis()+".unselectLogPoint(this);\" style='position:absolute;right:-4px;top:"+(this.toInt(time)-4)+"px;border:1px solid #339;border-radius:3px;width:5px;height:5px;cursor:pointer;z-index:1'></div>",str+="<li id='textLogPoint"+time+"' onmouseover=\""+this.getThis()+'.selectLogPoint(this);" onmouseout="'+this.getThis()+".unselectLogPoint(this);\" style='cursor:pointer;text-align:left;'><b>"+timeString+":</b> "+time.mess+"</li>",height+=20}return str+="</ul>",tl0="<div style='position:relative;border-right:1px solid #339;width:20px;height:"+parseInt(100*time)+"px'>",html+=tl0+tl+("</div></td><td>"+str+"</td></tr></table>"),this.createBubble(html,600,50,{resize:!0}),!0},HSF.prototype.selectLogPoint=function(el){var res,secEl;return(res=el.id.match(/(.*)LogPoint(.*)/))?("dot"===res[1]?(secEl=this.GBI("textLogPoint"+res[2]),secEl.style.textDecoration="underline",el.style.backgroundColor="#f0f",el.style.borderColor="#f0f",el.style.zIndex=10):(secEl=this.GBI("dotLogPoint"+res[2]),secEl.style.backgroundColor="#f0f",secEl.style.borderColor="#f0f",secEl.style.zIndex=10,el.style.textDecoration="underline"),!0):!1},HSF.prototype.unselectLogPoint=function(el){var res,secEl;return(res=el.id.match(/(.*)LogPoint(.*)/))?("dot"===res[1]?(secEl=this.GBI("textLogPoint"+res[2]),secEl.style.textDecoration="none",el.style.backgroundColor="transparent",el.style.borderColor="#339",el.style.zIndex=1):(secEl=this.GBI("dotLogPoint"+res[2]),secEl.style.backgroundColor="transparent",secEl.style.borderColor="#339",secEl.style.zIndex=1,el.style.textDecoration="none"),!0):!1},HSF.prototype.outerHTML=function(el){return el.outerHTML||"XMLSerializer"in window&&(new XMLSerializer).serializeToString(el)||!1},HSF.prototype.blockEvent=function(event){return null==event&&(event=window.event),event.stopPropagation?event.stopPropagation():event.cancelBubble=!0,event.preventDefault?event.preventDefault():event.returnValue=!1,!1},HSF.prototype.numberInputReplace=function(el,opt){var check,down,height,inputWrapperReplase,ndn,nup,parent,up,wheel,width,_this=this;return null==opt&&(opt={}),width=el.offsetWidth,height=el.offsetHeight,parent=el.parentNode,"input"!==el.tagName.toLowerCase()?!1:(inputWrapperReplase=f.createElement(".inputWrapperReplase",{style:{width:""+width+"px",height:""+height+"px",position:"relative",display:"inline-block"}}),parent.replaceChild(inputWrapperReplase,el),this.appendChild(inputWrapperReplase,el),this.appendChild(inputWrapperReplase,"<div class='nup' style='position: absolute; top: 0; right: 0; cursor: pointer; width: 10px; height: 50%;'></div><div class='ndn' style='position: absolute; bottom: 0; right: 0; cursor: pointer; width: 10px; height: 50%;'></div>"),el.style.width=width-12+"px",el.style.height=height-2+"px","step"in opt||(opt.step=1),up=function(){var value;return value=_this.toInt(el.value),el.value="max"in opt&&opt.max<value+opt.step?opt.max:value+opt.step,!0},down=function(){var value;return value=_this.toInt(el.value),el.value="min"in opt&&opt.min>value-opt.step?opt.min:value-opt.step,!0},check=function(){var value;return value=_this.toInt(el.value),"max"in opt&&opt.max<value?el.value=opt.max:"min"in opt&&opt.min>value&&(el.value=opt.min),!0},nup=this.GBC("nup",inputWrapperReplase)[0],ndn=this.GBC("ndn",inputWrapperReplase)[0],nup.onclick=function(e){return null==e&&(e=window.event),up()},ndn.onclick=function(e){return null==e&&(e=window.event),down()},__indexOf.call(nup,"ondblclick")>=0&&(nup.ondblclick=ndn.ondblclick=function(){return!0}),wheel=function(e){var num,wheelDelta,_i;null==e&&(e=window.event),wheelDelta=0,"wheelDelta"in e?wheelDelta=e.wheelDelta/120:"detail"in e&&(wheelDelta=-e.detail/3);for(num=_i=wheelDelta;0>=wheelDelta?0>=_i:_i>=0;num=0>=wheelDelta?++_i:--_i)num>0?up():0>num&&down();return e.preventDefault&&e.preventDefault(),e.returnValue=!1,_this.blockEvent(e),!1},"addEventListener"in el&&el.addEventListener("DOMMouseScroll",wheel,!1),el.onmousewheel=wheel,this.addEvent(el,"change",check),!0)},HSF.prototype.keyListener=function(key,func,ctrl,shift,alt){var keyCode,second;if(null==ctrl&&(ctrl=!1),null==shift&&(shift=!1),null==alt&&(alt=!1),"function"!=typeof func)return!1;if(second=null,keyCode=isNaN(key)||1===key.toString().length?key in this._keyMap?this._keyMap[key]:key:key,13===keyCode||10===keyCode?(keyCode=13,second=10):key>=0&&9>=key&&(second=this._keyMap["numpad"+key]),"opera"===this.browser().name)if(keyCode>=96&&105>=keyCode)keyCode-=48;else switch(keyCode){case 91:keyCode=219;break;case 93:keyCode=0;break;case 106:keyCode=42;break;case 107:keyCode=43;break;case 109:keyCode=45;break;case 110:keyCode=78;break;case 111:keyCode=47;break;case 186:keyCode=59;break;case 187:keyCode=61;break;case 189:keyCode=109}else if("mozilla"===this.browser().name)switch(keyCode){case 186:keyCode=59;break;case 187:keyCode=107;break;case 189:keyCode=109}return keyCode in this._keyListMap||(this._keyListMap[keyCode]=[]),this._keyListMap[keyCode].push({func:func,ctrl:ctrl,shift:shift,alt:alt}),second&&(second in this._keyListMap||(this._keyListMap[second]=[]),this._keyListMap[second].push({func:func,ctrl:ctrl,shift:shift,alt:alt})),!0},HSF.prototype.onDomReady=function(func){var oldonload;return this._ready===!0?(func(),this):(oldonload=this._funcDomReady,this._funcDomReady="function"!=typeof this._funcDomReady?func:function(){return oldonload(),func()},this)},initOnDomReady=function(){this._ready||(this._ready=!0,this._funcDomReady&&this._funcDomReady())},prepareOnDocumentReady=function(){var _t,_timer;_t=this,"addEventListener"in document?document.addEventListener("DOMContentLoaded",function(){return initOnDomReady.call(_t)},!1):"ie"===_t.browser().name||(/WebKit/i.test(navigator.userAgent)?_timer=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(_timer),initOnDomReady.call(_t))},10):window.onload=function(){return initOnDomReady.call(_t)})},HSF.prototype.setDrag=function(element,opt){var empty,msie,oldOver,sl,st,sx,sy,xy,_this=this;empty=function(){return!0},xy=function(e,v){return v?msie?event.clientY+document.body.scrollTop:e.pageY:msie?event.clientX+document.body.scrollTop:e.pageX},sy=0,sx=0,st=0,sl=0,msie="msie"===this.browser().name?1:0,opt={initThis:opt.initThis||!1,onDragStart:opt.onDragStart||empty,onDragEnd:opt.onDragEnd||empty,onDragCheckX:opt.onDragCheckX||empty,onDragCheckY:opt.onDragCheckY||empty,onDragOver:opt.onDragOver||!1,onDragOut:opt.onDragOut||!1,onDrop:opt.onDrop||!1,dragOverCheck:!1,dropCheck:!1},(opt.onDragOver||opt.onDragOut)&&(opt.dragOverCheck=!0,this.setMem(element,"oldDisplay",element.style.display),oldOver=null),opt.onDrop&&(opt.dropCheck=!0),element.ondragstart=function(){return!1},element.onselectstart=function(){return!1},element.onmousedown=function(e){var position,stl,stt,target,touchEnd,touchMove;if(e=e||window.event,opt.onDragStart(element,e,opt)===!1)return!1;_this.setTempStyle(document.body,{cursor:f.getStyle(element,"cursor")},"DragStyle"),target=e.target||e.srcElement,target.ondragstart=function(){return!1},opt.dragOverCheck&&(element.style.display="none",oldOver=document.elementFromPoint(e.pageX||e.clientX,e.pageY||e.clientY),element.style.display=_this.getMem(element,"oldDisplay")),position=_this.getStyle(element,"position"),"absolute"!==position&&"relative"!==position&&(element.style.position="relative"),sy=xy(e,1),sx=xy(e,0),"relative"===position?(stt=0,stl=0):(stt=element.offsetTop,stl=element.offsetLeft),st=_this.getStyle(element,"top"),st="auto"===st||""===st?stt:_this.toInt(st),sl=_this.getStyle(element,"left"),sl="auto"===sl||""===sl?stl:_this.toInt(sl),document.onmousemove=function(ev){var elOver,x,y;ev||(ev=window.event),y=xy(ev,1)-sy+st,x=xy(ev,0)-sx+sl,opt.onDragCheckY(element,y,ev)&&(element.style.top=y+"px"),opt.onDragCheckX(element,x,ev)&&(element.style.left=x+"px"),opt.dragOverCheck&&(element.style.display="none",elOver=document.elementFromPoint(ev.pageX||ev.clientX,ev.pageY||ev.clientY),element.style.display=_this.getMem(element,"oldDisplay"),oldOver!==elOver&&(opt.onDragOut&&opt.onDragOut(oldOver,ev),opt.onDragOver&&opt.onDragOver(elOver,ev),oldOver=elOver))};try{touchMove=f.addEvent(document,"touchmove",document.onmousemove)}catch(_error){}document.onmouseup=function(eu){var elOver;return eu||(eu=window.event),document.onmousemove=null,_this.retTempStyle(document.body,"DragStyle"),"function"==typeof touchMove&&touchMove(),opt.dropCheck&&(element.style.display="none",elOver=document.elementFromPoint(eu.pageX||eu.clientX,eu.pageY||eu.clientY),element.style.display=_this.getMem(element,"oldDisplay"),opt.onDrop(elOver,eu)),opt.onDragEnd(element,eu),document.onmouseup=null,"function"==typeof touchEnd&&touchEnd(),!0};try{touchEnd=f.addEvent(document,"touchend",document.onmouseup)}catch(_error){}return!1};try{f.addEvent(element,"touchstart",element.onmousedown)}catch(_error){}return this},HSF.prototype.insertAfter=function(el,exist){var next,parent;return parent=exist.parentNode,next=exist.nextSibling,next?parent.insertBefore(el,next):parent.appendChild(el),this},HSF.prototype.insertBefore=function(el,exist){return exist.parentNode.insertBefore(el,exist),this},HSF.prototype.formToData=function(form,isGet){var el,encodeEl,p,q,_i,_len,_ref;if(q="",p=isGet?"?":"",encodeEl=function(el){var r;return r=p+encodeURI(el.name)+"="+encodeURI(el.value),p="&",r},0===form.elements.length)return!1;for(_ref=form.elements,_i=0,_len=_ref.length;_len>_i;_i++)switch(el=_ref[_i],el.type){case"select-one":case"select":case"password":case"textarea":case"hidden":case"text":q+=encodeEl(el);break;case"radio":case"checkbox":el.checked&&(q+=encodeEl(el))}return q},HSF.prototype.createStyleSheet=function(){var ss;return null!=this._systemStyleSheet?this:(this._CSSCache={index:{},rules:[]},document.styleSheets.length>30?(this._systemStyleSheet=ss,this.updateStyleSheetIndex()):("createStyleSheet"in document?(ss=document.createStyleSheet(),this.appendChild(document.body,ss.owningElement)):ss=f.createElement("style",{},document.body).sheet,this._systemStyleSheet=ss),this)},HSF.prototype.updateStyleSheetIndex=function(){var cssText,i,indexStyle,mode,p,part,rule,rules,selectorText,sumaryStyle,_i,_j,_k,_len,_len1,_len2,_ref;for(sumaryStyle=[],indexStyle={},mode=-1,rules=this._systemStyleSheet.cssRules||this._systemStyleSheet.rules,_i=0,_len=rules.length;_len>_i;_i++)if(rule=rules[_i],"style"in rule){cssText=rule.style.cssText,mode=cssText.indexOf("{")>=0&&"}"===cssText.charAt(cssText.length-1)?1:0;break}for(i=_j=0,_len1=rules.length;_len1>_j;i=++_j)if(rule=rules[i],selectorText=rule.selectorText,"style"in rule){indexStyle[selectorText.replace(/(^| |\+|>|~|,)[A-Z]+/g,function(c){return c.toLowerCase()})]=i,selectorText in sumaryStyle||(sumaryStyle[i]={}),cssText=rule.style.cssText,1===mode&&(cssText=cssText.substr(0,cssText.length-1).substr(cssText.indexOf("{")+1).trim()),_ref=cssText.split(";");for(_k=0,_len2=_ref.length;_len2>_k;_k++)part=_ref[_k],p=part.indexOf(":"),-1!==p&&(sumaryStyle[i][part.substr(0,p).trim().toLowerCase()]=part.substring(p+1,part.length).trim());this._CSSCache.rules=sumaryStyle,this._CSSCache.index=indexStyle}else indexStyle[selectorText]=i,sumaryStyle[i]={};return this},HSF.prototype.setCSS=function(selector,prop,value){var eProps,i,newIndex,p,pp,props,reIndexed,rule,rules,sel,selectors,strProps,v,_i,_j,_len,_len1;switch(selectors=selector.split(","),props={},typeof prop){case"string":if(null==value)return this.log("setCSS: value не задана","error"),this;prop=prop.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()}),props[prop]=value;break;case"object":for(p in prop)__hasProp.call(prop,p)&&(value=prop[p],p=p.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()}),props[p]=value);break;default:return this.log("setCSS: Неизвестный тип prop","error"),this}if(null==this._CSSCache&&this.createStyleSheet(),rules=this._systemStyleSheet.cssRules||this._systemStyleSheet.rules,reIndexed=!1,this._CSSCache.rules.length!==rules.length)reIndexed=!0;else for(_i=0,_len=selectors.length;_len>_i;_i++)if(sel=selectors[_i],sel=sel.trim(),sel in this._CSSCache.index&&(rule=rules[this._CSSCache.index[sel]],rule.selectorText.replace(/(^| |\+|>|~|,)[A-Z]+/g,function(c){return c.toLowerCase()})!==sel)){reIndexed=!0;break}for(reIndexed&&(this.updateStyleSheetIndex(),this.log("index is crash","warn")),strProps="",_j=0,_len1=selectors.length;_len1>_j;_j++){sel=selectors[_j],sel=sel.trim(),i=this._CSSCache.index[sel],null==i&&(newIndex=this._CSSCache.rules.length,this._systemStyleSheet.addRule?this._systemStyleSheet.addRule(sel,"abc: dev;",newIndex):this._systemStyleSheet.insertRule(""+sel+" {}",newIndex),this._CSSCache.rules[newIndex]={},this._CSSCache.index[sel]=newIndex,i=newIndex),rule=rules[i],eProps=this._CSSCache.rules[i];for(p in eProps)__hasProp.call(eProps,p)&&(v=eProps[p],p in props?(pp=props[p],null!==pp?(strProps+=""+p+": "+pp+"; ",eProps[p]=pp,delete props[p]):delete eProps[p]):strProps+=""+p+": "+v+"; ");for(p in props)__hasProp.call(props,p)&&(v=props[p],strProps+=""+p+": "+v+"; ",eProps[p]=v);rule.style.cssText=strProps}return this},HSF.prototype.remCSS=function(selector){var i,reIndexed,rule,rules,sel,selectors,_i,_j,_len,_len1;if(null==this._systemStyleSheet)return this;if(selectors=selector.split(","),rules=this._systemStyleSheet.cssRules||this._systemStyleSheet.rules,reIndexed=!1,this._CSSCache.rules.length!==rules.length)reIndexed=!0;else for(_i=0,_len=selectors.length;_len>_i;_i++)if(sel=selectors[_i],sel in this._CSSCache.index&&(rule=rules[this._CSSCache.index[sel]],rule.selectorText.replace(/(^| |\+|>|~|,)[A-Z]+/g,function(c){return c.toLowerCase()
})!==sel)){reIndexed=!0;break}for(reIndexed&&(this.updateStyleSheetIndex(),this.log("index is crash","warn")),_j=0,_len1=selectors.length;_len1>_j;_j++)sel=selectors[_j],i=this._CSSCache.index[sel],null!=i&&("deleteRule"in this._systemStyleSheet?this._systemStyleSheet.deleteRule(i):this._systemStyleSheet.removeRule(i),this._CSSCache.rules.del(i),delete this._CSSCache.index[sel]);return this},HSF.prototype.delCSS=function(selector){return this.remCSS(selector)},HSF}(),"localStorage"in window?(HSF.prototype.setLS=function(key,val){var e;try{localStorage.setItem(key,val)}catch(_error){return e=_error}return!0},HSF.prototype.getLS=function(key){return localStorage.getItem(key)},HSF.prototype.delLS=function(key){return localStorage.removeItem(key)},HSF.prototype.clearLS=function(){return localStorage.clear()}):"msie"===HSF.prototype.browser().name?(HSF.prototype._initIeStorage=function(){return this._storage=this.createElement("div#__storageElement",{style:{display:"none"}},document.body),this._storage.addBehavior?(this._storage.addBehavior("#default#userData"),this._storage.load("hsf")):this.log("Нет поддержки userDara"),this},HSF.prototype.setLS=function(key,value){return this._storage.setAttribute(key,value),this._storage.save("hsf"),this},HSF.prototype.getLS=function(key){return this._storage.getAttribute(key)},HSF.prototype.delLS=function(key){return this._storage.removeAttribute(key),this._storage.save("hsf"),this},HSF.prototype.clearLS=function(){var v,_i,_len,_ref;for(_ref=this._storage.XMLDocument.documentElement.attributes,_i=0,_len=_ref.length;_len>_i;_i++)v=_ref[_i],this.delLS(v.name);return this}):(HSF.prototype.setLS=function(){return this},HSF.prototype.getLS=function(){return null},HSF.prototype.delLS=function(){return this},HSF.prototype.clearLS=function(){return this}),window.f=new HSF({counter:!1})}).call(this);
//# sourceMappingURL=hsf.min.js.map